# Valkey Monitoring Stack
# Prometheus + Valkey Exporter
#
# Access metrics at: http://localhost:9121/metrics
# Add to your Prometheus config to scrape

services:
  valkey-exporter:
    image: oliver006/redis_exporter:latest
    container_name: valkey-exporter
    restart: unless-stopped
    environment:
      - REDIS_ADDR=rediss://localhost:6379
      - REDIS_PASSWORD=${VALKEY_PASSWORD:-your-password}
      - REDIS_EXPORTER_SKIP_TLS_VERIFICATION=true
    ports:
      - "9121:9121"
    network_mode: host

  # Optional: Local Prometheus
  # prometheus:
  #   image: prom/prometheus:latest
  #   container_name: prometheus
  #   restart: unless-stopped
  #   ports:
  #     - "9090:9090"
  #   volumes:
  #     - ./prometheus.yml:/etc/prometheus/prometheus.yml:ro
  #     - prometheus_data:/prometheus
  #   command:
  #     - '--config.file=/etc/prometheus/prometheus.yml'
  #     - '--storage.tsdb.path=/prometheus'

# volumes:
#   prometheus_data:
